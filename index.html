<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pré-evento | BootCamp</title>
    <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;600;800&display=swap" rel="stylesheet">
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
    <script type="text/javascript">
       (function(){ emailjs.init("IK3d5cmy1bv13ZBEl"); })();
    </script>

    <style>
        :root { 
            --amarelo: #F2C94C; 
            --roxo: #7B5DFF; 
            --preto: #050505; 
            --branco: #FFFFFF; 
            --glass: rgba(0, 0, 0, 0.85);
            --border: rgba(255, 255, 255, 0.1);
        }
        
        body { 
            margin: 0; padding: 0; font-family: 'Manrope', sans-serif; 
            background: var(--preto); color: var(--branco); 
            background-image: linear-gradient(rgba(0,0,0,0.35), rgba(0,0,0,0.35)), url('background.png');
            background-size: cover; background-position: center; background-attachment: fixed;
            display: flex; align-items: center; justify-content: center; min-height: 100vh;
        }

        #form-container { width: 100%; max-width: 480px; padding: 20px; box-sizing: border-box; }
        
        .event-header { text-align: center; margin-bottom: 30px; animation: slideUp 0.6s ease; }
        .event-header img { width: 120px; margin-bottom: 15px; }
        .event-header h1 { font-size: 16px; color: var(--amarelo); text-transform: uppercase; letter-spacing: 1px; margin: 0 0 5px 0; font-weight: 800; }
        .event-header p { font-size: 14px; margin: 0; opacity: 0.8; line-height: 1.5; }

        .progress-wrap { width: 100%; height: 6px; background: rgba(255,255,255,0.1); border-radius: 10px; margin-bottom: 30px; }
        .progress-bar { height: 100%; width: 14.2%; background: var(--amarelo); transition: 0.6s; border-radius: 10px; box-shadow: 0 0 15px var(--amarelo); }
        
        .card { 
            background: var(--glass); padding: 40px; border-radius: 32px; border: 1px solid var(--border); 
            display: none; box-sizing: border-box; backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px);
        }
        .card.active { display: flex; flex-direction: column; animation: slideUp 0.4s ease; }

        h2 { font-size: 16px; margin: 0 0 20px 0; color: var(--amarelo); text-transform: uppercase; letter-spacing: 1px; line-height: 1.4; font-weight: 800; }
        
        /* CORREÇÃO DO TEXTO SOBREPOSTO AQUI */
        .hint { font-size: 12px; opacity: 0.6; margin-top: 0px; margin-bottom: 20px; }
        
        input[type="text"], input[type="tel"], input[type="email"] { 
            width: 100%; background: transparent; border: none; border-bottom: 2px solid #333; 
            color: #fff; padding: 15px 0; font-size: 16px; outline: none; margin-bottom: 25px; 
            font-family: 'Manrope'; box-sizing: border-box; transition: 0.3s;
        }
        input:focus { border-bottom-color: var(--amarelo); }

        .opt-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 20px; }
        .opt { 
            border: 1px solid #333; padding: 15px; border-radius: 12px; cursor: pointer; 
            text-align: center; font-size: 13px; transition: 0.2s; background: rgba(255,255,255,0.03); 
            display: flex; align-items: center; justify-content: center; line-height: 1.3; font-weight: 600;
        }
        .opt.selected { background: var(--amarelo); color: #000; font-weight: 800; border-color: var(--amarelo); }
        .opt.full { grid-column: span 2; }

        .btns { display: flex; gap: 10px; margin-top: 10px; }
        .next { background: var(--amarelo); color: #000; border: none; padding: 18px; border-radius: 15px; font-weight: 800; flex: 2; cursor: pointer; text-transform: uppercase; font-family: 'Manrope'; font-size: 14px; transition: 0.3s; }
        .next:hover { transform: translateY(-2px); box-shadow: 0 10px 20px rgba(242, 201, 76, 0.2); }
        .back { background: transparent; color: #fff; border: 1px solid #444; border-radius: 15px; flex: 1; cursor: pointer; text-transform: uppercase; font-family: 'Manrope'; font-size: 14px; transition: 0.3s; }
        .back:hover { background: rgba(255,255,255,0.05); }

        @keyframes slideUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>
    <div id="form-container">
        <div class="event-header">
            <img src="Frame 26.png" alt="IpêStart">
            <h1>PRÉ-EVENTO | BOOTCAMP</h1>
            <p>O primeiro passo para tirar sua ideia do papel. Mapeie seu momento atual e garanta acesso ao nosso ecossistema.</p>
        </div>

        <div class="progress-wrap"><div class="progress-bar" id="bar"></div></div>

        <div class="card active" id="s1">
            <h2>01. Identificação</h2>
            <input type="text" id="nome" placeholder="Nome completo" onkeyup="checkEnter(event, 1)">
            <input type="tel" id="whatsapp" placeholder="WhatsApp" maxlength="15" onkeyup="checkEnter(event, 1)">
            <input type="email" id="email" placeholder="E-mail" onkeyup="checkEnter(event, 1)">
            <button class="next" onclick="next(1)" style="margin-top: 10px;">Continuar</button>
        </div>

        <div class="card" id="s2">
            <h2>02. Qual seu perfil?</h2>
            <div class="opt-grid">
                <div class="opt p" onclick="sel('p',this,'Empresa Júnior','perfil')">Empresa Júnior</div>
                <div class="opt p" onclick="sel('p',this,'Núcleo','perfil')">Núcleo / Liga</div>
                <div class="opt p" onclick="sel('p',this,'Docente','perfil')">Docente</div>
                <div class="opt p" onclick="sel('p',this,'Pesquisa','perfil')">Projeto de Pesquisa</div>
                <div class="opt p full" onclick="sel('p',this,'Outro','perfil')">Outro</div>
            </div>
            <input type="text" id="perfil_outro" placeholder="Digite seu perfil..." style="display: none;">
            
            <div class="btns"><button class="back" onclick="back(2)">Voltar</button><button class="next" onclick="next(2)">Próximo</button></div>
        </div>

        <div class="card" id="s3">
            <h2>03. Você tem alguma iniciativa ou projeto em andamento?</h2>
            <div class="opt-grid">
                <div class="opt full s" onclick="sel('s',this,'Sim, ativo','status')">Sim, ativo</div>
                <div class="opt full s" onclick="sel('s',this,'Ideia em mente','status')">Tenho algo em mente</div>
                <div class="opt full s" onclick="sel('s',this,'Ainda não','status')">Ainda não</div>
            </div>
            <div class="btns"><button class="back" onclick="back(3)">Voltar</button><button class="next" onclick="next(3)">Próximo</button></div>
        </div>

        <div class="card" id="s4">
            <h2>04. Em qual fase você está mais perto?</h2>
            <div class="opt-grid">
                <div class="opt f" onclick="sel('f',this,'Problema','fase')">Problema / Tema</div>
                <div class="opt f" onclick="sel('f',this,'Ideia','fase')">Ideia desenhada</div>
                <div class="opt f" onclick="sel('f',this,'Protótipo','fase')">Protótipo / POC</div>
                <div class="opt f" onclick="sel('f',this,'Tração','fase')">Tração / Escala</div>
                <div class="opt f full" onclick="sel('f',this,'Explorando','fase')">Só explorando o assunto</div>
            </div>
            <div class="btns"><button class="back" onclick="back(4)">Voltar</button><button class="next" onclick="next(4)">Próximo</button></div>
        </div>

        <div class="card" id="s5">
            <h2>05. Qual bloqueio quer destravar em 30 dias?</h2>
            <div class="opt-grid">
                <div class="opt b" onclick="sel('b',this,'Validação','desafio')">Validar ideia/mercado</div>
                <div class="opt b" onclick="sel('b',this,'Equipe','desafio')">Formar equipe</div>
                <div class="opt b" onclick="sel('b',this,'Técnico','desafio')">Desenvolvimento Técnico</div>
                <div class="opt b" onclick="sel('b',this,'Recursos','desafio')">Conseguir recursos</div>
                <div class="opt b full" onclick="sel('b',this,'Começar','desafio')">Não sei por onde começar</div>
            </div>
            <div class="btns"><button class="back" onclick="back(5)">Voltar</button><button class="next" onclick="next(5)">Próximo</button></div>
        </div>

        <div class="card" id="s6">
            <h2>06. Interesse no Bootcamp Ideação?</h2>
            <div class="opt-grid">
                <div class="opt i" onclick="sel('i',this,'Sim','boot')">Sim</div>
                <div class="opt i" onclick="sel('i',this,'Talvez','boot')">Talvez</div>
                <div class="opt i full" onclick="sel('i',this,'Não','boot')">Não</div>
            </div>
            
            <h2 style="margin-top: 10px;">Melhor turno para você?</h2>
            <div class="opt-grid" style="margin-bottom: 10px;">
                <div class="opt t" onclick="sel('t',this,'Manhã','turno')">Manhã</div>
                <div class="opt t" onclick="sel('t',this,'Tarde','turno')">Tarde</div>
                <div class="opt t full" onclick="sel('t',this,'Noite','turno')">Noite</div>
            </div>
            
            <input type="text" id="horario_sugerido" placeholder="Sugira um horário (Ex: 14h às 16h)" style="margin-bottom: 20px;" onkeyup="if(event.key === 'Enter') route()">
            
            <div class="btns"><button class="back" onclick="back(6)">Voltar</button><button class="next" onclick="route()">Continuar</button></div>
        </div>

        <div class="card" id="s7A">
            <h2 style="font-size: 14px; margin-bottom: 5px;">Radar de 90 dias:</h2>
            <p class="hint">O que farão? (Pode marcar vários)</p>
            <div class="opt-grid" style="margin-bottom: 15px;">
                <div class="opt a1" onclick="multi(this,'a1','radar', 5)">Capacitação</div>
                <div class="opt a1" onclick="multi(this,'a1','radar', 5)">Hackathon</div>
                <div class="opt a1" onclick="multi(this,'a1','radar', 5)">Evento Técnico</div>
                <div class="opt a1" onclick="multi(this,'a1','radar', 5)">Proj. Empresa</div>
                <div class="opt a1 full" onclick="multi(this,'a1','radar', 5)">Outro</div>
            </div>
            <input type="text" id="radar_outro" placeholder="Qual outro evento?" style="display: none;">

            <h2 style="font-size: 14px; margin-bottom: 5px; margin-top: 10px;">Como o Parque pode apoiar?</h2>
            <p class="hint">Marque até 2 opções</p>
            <div class="opt-grid" style="margin-bottom: 15px;">
                <div class="opt a2" onclick="multi(this,'a2','apoio', 2)">Espaço/Infra</div>
                <div class="opt a2" onclick="multi(this,'a2','apoio', 2)">Mentores</div>
                <div class="opt a2" onclick="multi(this,'a2','apoio', 2)">Metodologia</div>
                <div class="opt a2" onclick="multi(this,'a2','apoio', 2)">Conexões</div>
            </div>

            <h2 style="font-size: 14px; margin-bottom: 10px;">Topam ser multiplicadores?</h2>
            <div class="opt-grid">
                <div class="opt a3 full" onclick="sel('a3',this,'Sim, replicar','mult')">Sim, replicar no grupo</div>
                <div class="opt a3 full" onclick="sel('a3',this,'Sim, pontual','mult')">Sim, pontualmente</div>
                <div class="opt a3 full" onclick="sel('a3',this,'Não','mult')">Não por enquanto</div>
            </div>
            
            <input type="text" id="link" placeholder="Link do Instagram ou Drive (Opcional)" style="margin-top:10px;">

            <div class="btns"><button class="back" onclick="back(7, 'A')">Voltar</button><button class="next" id="btn-a" onclick="send()">Finalizar</button></div>
        </div>

        <div class="card" id="s7B">
            <h2 style="font-size: 14px; margin-bottom: 10px;">Potencial para virar Produto/Serviço?</h2>
            <div class="opt-grid" style="margin-bottom: 15px;">
                <div class="opt b1" onclick="sel('b1',this,'Sim','potencial')">Sim</div>
                <div class="opt b1" onclick="sel('b1',this,'Talvez','potencial')">Talvez</div>
                <div class="opt b1 full" onclick="sel('b1',this,'Não sei','potencial')">Não / Não sei</div>
            </div>

            <h2 style="font-size: 14px; margin-bottom: 5px;">O que mais te trava hoje?</h2>
            <p class="hint">Marque até 2 opções</p>
            <div class="opt-grid" style="margin-bottom: 15px;">
                <div class="opt b2" onclick="multi(this,'b2','gargalo', 2)">Tempo</div>
                <div class="opt b2" onclick="multi(this,'b2','gargalo', 2)">Time</div>
                <div class="opt b2" onclick="multi(this,'b2','gargalo', 2)">Funding</div>
                <div class="opt b2" onclick="multi(this,'b2','gargalo', 2)">Parcerias</div>
            </div>

            <h2 style="font-size: 14px; margin-bottom: 10px;">Como prefere se envolver?</h2>
            <div class="opt-grid" style="margin-bottom: 15px;">
                <div class="opt b3 full" onclick="sel('b3',this,'Incubar','envolv')">Incubar iniciativa</div>
                <div class="opt b3 full" onclick="sel('b3',this,'Mentor','envolv')">Ser Mentor(a)</div>
            </div>

            <h2 style="font-size: 14px; margin-bottom: 10px;">Topa um papo rápido de 15 min?</h2>
            <div class="opt-grid">
                <div class="opt b4" onclick="sel('b4',this,'Sim','papo')">Sim</div>
                <div class="opt b4" onclick="sel('b4',this,'Não','papo')">Não</div>
            </div>

            <div class="btns"><button class="back" onclick="back(7, 'B')">Voltar</button><button class="next" id="btn-b" onclick="send()">Finalizar</button></div>
        </div>

        <div class="card" id="sFinal" style="text-align:center; padding: 60px 40px; align-items: center; flex-direction: column; justify-content: center;">
            <h2 style="font-size: 30px; margin-bottom: 10px;">DIRECIONAMENTO SALVO!</h2>
            <p style="font-size: 16px; margin-bottom: 40px; opacity: 0.9;">Obrigado por responder. Em breve nossa equipe entrará em contato.</p>
            <button class="next" onclick="location.reload()" style="max-width: 300px; width: 100%; flex: none;">SAIR</button>
        </div>
    </div>

    <script>
        let form = { 
            perfil: "", status: "", fase: "", desafio: "", boot: "", turno: "",
            radar: [], apoio: [], mult: "", 
            potencial: "", gargalo: [], envolv: "", papo: "" 
        };
        const API = 'https://sheetdb.io/api/v1/o91i7z567ubte'; 
        const TOTAL_STEPS = 7;

        document.getElementById('whatsapp').addEventListener('input', e => {
            let x = e.target.value.replace(/\D/g, '').match(/(\d{0,2})(\d{0,5})(\d{0,4})/);
            e.target.value = !x[2] ? x[1] : '(' + x[1] + ') ' + x[2] + (x[3] ? '-' + x[3] : '');
        });

        function checkEnter(e, s) { if(e.key === "Enter") next(s); }

        function sel(g, b, v, f) {
            document.querySelectorAll('.'+g).forEach(i => i.classList.remove('selected'));
            b.classList.add('selected'); form[f] = v;
            
            if(f === 'perfil') {
                document.getElementById('perfil_outro').style.display = (v === 'Outro') ? 'block' : 'none';
            }
        }
        
        function multi(b, g, f, limit) {
            if (b.classList.contains('selected')) {
                b.classList.remove('selected'); 
                form[f] = form[f].filter(i => i !== b.innerText);
            } else if (form[f].length < limit) {
                b.classList.add('selected'); 
                form[f].push(b.innerText);
            }
            
            if(f === 'radar') {
                document.getElementById('radar_outro').style.display = form.radar.includes('Outro') ? 'block' : 'none';
            }
        }

        function updateBar(step) {
            document.getElementById('bar').style.width = (step / TOTAL_STEPS) * 100 + '%';
        }

        function next(s) {
            if (s === 1) {
                const nomeVal = document.getElementById('nome').value.trim();
                const zapVal = document.getElementById('whatsapp').value.trim();
                const emailVal = document.getElementById('email').value.trim();
                if (!nomeVal || !zapVal || !emailVal) return alert("Por favor, preencha todos os campos de contato.");
            }
            
            if (s === 2) {
                if(!form.perfil) return alert("Por favor, selecione um Perfil.");
                if(form.perfil === "Outro" && document.getElementById('perfil_outro').value.trim() === "") {
                    return alert("Por favor, digite qual é o seu perfil.");
                }
            }
            
            if (s === 3 && !form.status) return alert("Por favor, selecione o status.");
            if (s === 4 && !form.fase) return alert("Por favor, selecione a fase.");
            if (s === 5 && !form.desafio) return alert("Por favor, selecione o bloqueio.");

            document.getElementById('s'+s).style.display = 'none';
            document.getElementById('s'+s).classList.remove('active');
            const nxt = document.getElementById('s'+(s+1));
            nxt.style.display = 'flex'; nxt.classList.add('active');
            updateBar(s+1);
        }

        function back(s, branch = null) {
            document.getElementById('s' + (branch ? '7'+branch : s)).style.display = 'none';
            document.getElementById('s' + (branch ? '7'+branch : s)).classList.remove('active');
            
            const prev = document.getElementById('s'+(branch ? 6 : s-1));
            prev.style.display = 'flex'; prev.classList.add('active');
            updateBar(branch ? 6 : s-1);
        }

        function route() {
            const horarioInput = document.getElementById('horario_sugerido').value.trim();
            if (!form.boot || !form.turno || !horarioInput) {
                return alert("Por favor, responda interesse, turno e sugira um horário.");
            }

            document.getElementById('s6').style.display = 'none';
            document.getElementById('s6').classList.remove('active');
            updateBar(7);

            if(form.perfil === "Empresa Júnior" || form.perfil === "Núcleo") {
                document.getElementById('s7A').style.display = 'flex';
                document.getElementById('s7A').classList.add('active');
            } else if (form.perfil === "Docente" || form.perfil === "Pesquisa") {
                document.getElementById('s7B').style.display = 'flex';
                document.getElementById('s7B').classList.add('active');
            } else {
                send(true); 
            }
        }

        async function send(isDirect = false) {
            if (!isDirect) {
                if (form.perfil === "Empresa Júnior" || form.perfil === "Núcleo") {
                    if (form.radar.length === 0 || form.apoio.length === 0 || !form.mult) {
                        return alert("Por favor, responda a todas as opções desta tela.");
                    }
                    if(form.radar.includes("Outro") && document.getElementById('radar_outro').value.trim() === "") {
                        return alert("Por favor, digite qual outro evento está no radar.");
                    }
                } 
                else if (form.perfil === "Docente" || form.perfil === "Pesquisa") {
                    if (!form.potencial || form.gargalo.length === 0 || !form.envolv || !form.papo) {
                        return alert("Por favor, responda a todas as opções desta tela.");
                    }
                }
                document.getElementById('btn-a').innerText = "Enviando...";
                document.getElementById('btn-b').innerText = "Enviando...";
            }

            let perfilFinal = form.perfil === 'Outro' ? document.getElementById('perfil_outro').value : form.perfil;
            
            let radarFinal = form.radar.join(", ");
            if (form.radar.includes('Outro')) {
                radarFinal = radarFinal.replace('Outro', 'Outro: ' + document.getElementById('radar_outro').value);
            }

            const data = {
                "Nome": document.getElementById('nome').value,
                "WhatsApp": document.getElementById('whatsapp').value,
                "Email": document.getElementById('email').value,
                "Perfil": perfilFinal,
                "Status_Projeto": form.status,
                "Fase": form.fase,
                "Desafio_30d": form.desafio,
                "Bootcamp": form.boot,
                "Turno": form.turno,
                "Horario_Sugerido": document.getElementById('horario_sugerido').value,
                "Radar_Acoes": radarFinal,
                "Apoio_Parque": form.apoio.join(", "),
                "Multiplicador": form.mult,
                "Link_Rede": document.getElementById('link') ? document.getElementById('link').value : "",
                "Potencial_Produto": form.potencial,
                "Gargalo": form.gargalo.join(", "),
                "Envolvimento": form.envolv,
                "Papo_Triagem": form.papo
            };

            try {
                await fetch(API, { 
                    method: 'POST', 
                    headers: {'Content-Type': 'application/json'}, 
                    body: JSON.stringify({data: [data]}) 
                });
                
                if (data.Email) {
                    try {
                        await emailjs.send("service_clqnr6o", "template_8u9l9kh", {
                            nome: data.Nome, email: data.Email
                        });
                    } catch (emailError) {
                        console.error("Erro no EmailJS:", emailError);
                        alert("Os dados foram salvos, mas houve um erro ao enviar o e-mail de confirmação. (Verifique o Template no EmailJS)");
                    }
                }
                
                document.getElementById('s6').style.display = 'none';
                document.getElementById('s7A').style.display = 'none'; 
                document.getElementById('s7B').style.display = 'none';
                
                document.getElementById('sFinal').style.display = 'flex';
                document.getElementById('sFinal').classList.add('active');
                updateBar(7);
                
            } catch(e) { 
                alert("Erro ao salvar na planilha. Verifique sua internet."); 
                if(!isDirect) {
                    document.getElementById('btn-a').innerText = "Finalizar";
                    document.getElementById('btn-b').innerText = "Finalizar";
                }
            }
        }
    </script>
</body>
</html>
